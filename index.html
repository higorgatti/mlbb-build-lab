<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MLBB Build Lab — Monte e teste suas builds de Mobile Legends</title>
  <meta name="description" content="Escolha o herói, adicione itens e veja os atributos e um DPS aproximado — tudo direto no navegador.">
  <link rel="icon" href="assets/favicon.ico">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
  <meta property="og:type" content="website">
  <meta property="og:title" content="MLBB Build Lab — Monte e teste suas builds de Mobile Legends">
  <meta property="og:description" content="Escolha o herói, adicione itens e veja atributos + DPS aproximado — direto no navegador.">
  <meta property="og:image" content="assets/og-image.png">
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:title" content="MLBB Build Lab — Monte e teste suas builds de Mobile Legends">
  <meta property="twitter:description" content="Escolha o herói, adicione itens e veja atributos + DPS aproximado — direto no navegador.">
  <meta property="twitter:image" content="assets/og-image.png">
  <style>
    :root{ --bg:#0f1115; --panel:#151823; --muted:#8b94a7; --text:#e7ecf6; --accent:#6ee7b7; --danger:#f87171; --card:#1b2130; --chip:#232a3b; --border:#2b3348; }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; background:var(--bg); color:var(--text); font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, 'Noto Sans', 'Helvetica Neue', sans-serif; line-height:1.4}
    a{color:var(--accent); text-decoration:none}
    .wrap{max-width:1200px; margin:0 auto; padding:16px}
    header{display:flex; gap:12px; align-items:center; justify-content:space-between; padding:12px 0}
    .brand{display:flex; gap:10px; align-items:center}
    .logo{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,#1f2937,#111827);display:flex;align-items:center;justify-content:center;border:1px solid var(--border);font-weight:700}
    .pill{border:1px solid var(--border); background:var(--chip); padding:6px 10px; border-radius:999px; font-size:12px; color:var(--muted)}
    .layout{display:grid; grid-template-columns: 1fr 360px; gap:16px}
    @media (max-width: 980px){ .layout{grid-template-columns:1fr} }
    .panel{background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:14px}
    h1{font-size:18px; margin:0}
    h2{font-size:16px; margin:0 0 10px 0}
    .searchbar{display:flex; gap:8px; margin:10px 0}
    .searchbar select{flex:1; background:var(--chip); border:1px solid var(--border); border-radius:10px; color:var(--text); padding:10px 12px; outline:none}
    .grid{display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:10px}
    @media (max-width:700px){ .grid{grid-template-columns: repeat(2, minmax(0,1fr));} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:12px; display:flex; flex-direction:column; gap:6px}
    .card h3{font-size:14px; margin:0}
    .meta{color:var(--muted); font-size:12px}
    .btn{background:var(--chip); border:1px solid var(--border); padding:8px 10px; border-radius:10px; color:var(--text); cursor:pointer; text-align:center}
    .btn:hover{filter:brightness(1.1)}
    .btn-accent{background:rgba(110,231,183,.1); border-color:#2c574b; color:var(--accent)}
    .btn-danger{background:rgba(248,113,113,.1); border-color:#5e2b2b; color:var(--danger)}
    .build{display:flex; flex-direction:column; gap:10px}
    .slots{display:grid; grid-template-columns: repeat(3, 1fr); gap:8px}
    .slot{background:var(--chip); border:1px dashed var(--border); border-radius:10px; padding:8px; height:70px; display:flex; align-items:center; justify-content:center; color:var(--muted); position:relative}
    .slot.filled{border-style:solid; background:var(--card); color:var(--text)}
    .slot .x{position:absolute; top:6px; right:6px; font-size:12px; cursor:pointer; opacity:.85}
    .stat{display:flex; justify-content:space-between; gap:10px; padding:6px 8px; background:var(--chip); border:1px solid var(--border); border-radius:8px; font-size:13px}
    .stats{display:grid; grid-template-columns: 1fr 1fr; gap:8px}
    .note{font-size:12px; color:var(--muted); margin-top:4px}
    .small{font-size:12px}
    .divider{height:1px; background:var(--border); margin:8px 0}
    .footer{margin-top:12px; font-size:12px; color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">ML</div>
        <div>
          <div style="display:flex; gap:8px; align-items:center;">
            <h1>MLBB Build Lab</h1>
            <span class="pill">dados de /data/*.json</span>
          </div>
          <div class="note">Escolha o herói, adicione itens e veja atributos + DPS aproximado.</div>
        </div>
      </div>
      <div class="row">
        <button id="btn-export" class="btn btn-accent small">Compartilhar build</button>
        <button id="btn-reset" class="btn btn-danger small">Limpar</button>
      </div>
    </header>

    <div class="layout">
      <main class="panel">
        <section>
          <h2>Heróis</h2>
          <div class="searchbar">
            <select id="hero-select"></select>
            <select id="hero-filter">
              <option value="todos">Todos os tipos</option>
              <option value="Físico">Físico</option>
              <option value="Mágico">Mágico</option>
              <option value="Híbrido">Híbrido</option>
            </select>
          </div>
        </section>

        <div class="divider"></div>

        <section>
          <h2>Itens</h2>
          <div class="searchbar">
            <select id="item-select"></select>
            <select id="item-filter">
              <option value="todas">Todas as classes</option>
              <option value="Ataque">Ataque</option>
              <option value="Magia">Magia</option>
              <option value="Defesa">Defesa</option>
              <option value="Movimento">Movimento</option>
              <option value="Jungle">Jungle</option>
              <option value="Roamer">Roamer</option>
            </select>
          </div>
        </section>
      </main>

      <aside class="panel">
        <div class="build">
          <div>
            <h2>Build</h2>
            <div id="build-hero" class="note">Nenhum herói selecionado.</div>
          </div>
          <div class="slots" id="slots"></div>

          <div class="divider"></div>

          <div>
            <h2>Resumo de Atributos</h2>
            <div class="stats" id="stats"></div>
          </div>

          <div class="divider"></div>

          <div>
            <h2>Simulador de DPS</h2>
            <div class="row">
              <label class="small">Armadura</label>
              <input id="alvo-armor" type="number" value="40" style="width:90px">
              <label class="small">Resist. Mágica</label>
              <input id="alvo-mres" type="number" value="40" style="width:90px">
            </div>
            <div class="stat"><span>DPS Físico (aprox.)</span><strong id="dps-fis">0</strong></div>
            <div class="stat"><span>DPS Mágico (aprox.)</span><strong id="dps-mag">0</strong></div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
  let HEROES=[], ITENS=[];
  const state={heroId:null, build:[], alvo:{armor:40,mres:40}};
  const el=s=>document.querySelector(s);

  async function loadJSON(path){ const r=await fetch(path,{cache:'no-store'}); return await r.json(); }

  function fillHeroSelect(){
    const sel=el('#hero-select');
    sel.innerHTML='<option value="">Selecionar herói…</option>'+HEROES.map(h=>`<option value="${h.id}">${h.nome} — ${h.tipoDano}</option>`).join('');
    sel.onchange=()=>{ if(!sel.value)return; state.heroId=sel.value; renderBuildHeader(); compute(); };
  }

  function fillItemSelect(){
    const sel=el('#item-select');
    sel.innerHTML='<option value="">Adicionar item…</option>'+ITENS.map(it=>`<option value="${it.id}">${it.nome} — ${it.classe}</option>`).join('');
    sel.onchange=()=>{ if(!sel.value)return; if(state.build.length>=6){alert('A build já tem 6 itens.'); sel.value=''; return;} state.build.push(sel.value); renderSlots(); compute(); sel.value=''; };
  }

  function renderBuildHeader(){ const h=HEROES.find(x=>x.id===state.heroId); el('#build-hero').textContent=h? `${h.nome} — ${h.tipoDano}` : 'Nenhum herói selecionado.'; }
  function renderSlots(){ const slots=el('#slots'); slots.innerHTML=''; for(let i=0;i<6;i++){ const id=state.build[i]; const div=document.createElement('div'); div.className='slot'+(id?' filled':''); if(id){ const it=ITENS.find(x=>x.id===id); div.innerHTML=`<div><strong>${it?.nome||id}</strong></div><div class='x'>✕</div>`; div.querySelector('.x').onclick=()=>{ state.build.splice(i,1); renderSlots(); compute(); }; } else { div.textContent='Vazio'; } slots.appendChild(div);} }
  function sumStats(){ const s={ataque:0,poderMagico:0,velAtaque:0,crit:0}; state.build.forEach(id=>{ const it=ITENS.find(x=>x.id===id); if(!it)return; for(const [k,v] of Object.entries(it.stats||{})){ s[k]=(s[k]||0)+(typeof v==='number'?v:0);} }); return s;}
  function compute(){ const stats=el('#stats'); stats.innerHTML=''; const h=HEROES.find(x=>x.id===state.heroId); const s=sumStats(); const atk=(h?.base?.ataque||0)+(s.ataque||0); const mag=(h?.base?.poderMagico||0)+(s.poderMagico||0); const aa=Number(el('#alvo-armor').value)||0; const am=Number(el('#alvo-mres').value)||0; el('#dps-fis').textContent=Math.round(atk*(100/(100+aa))); el('#dps-mag').textContent=Math.round(mag*(100/(100+am))); }
  
  async function init(){ HEROES=await loadJSON('data/heroes.json'); ITENS=await loadJSON('data/itens.json'); fillHeroSelect(); fillItemSelect(); renderSlots(); renderBuildHeader(); compute(); el('#alvo-armor').addEventListener('input', compute); el('#alvo-mres').addEventListener('input', compute); }
  document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
